# TICKET-027 COMPLETION REPORT

- 티켓 ID: TICKET-027
- 티켓명: ILD-UAG 작성
- 완료일: 2026-02-17
- 담당: ILD agent (UAG)
- 입력 문서:
  - `docs/lld/LLD-UAG-v0.1.0.md`
- 산출 문서:
  - `docs/ild/ILD-UAG-v0.1.0.md`

## 1) 수행 결과

- UAG 모듈 구현 상세 설계(ILD) 신규 작성 완료
- 엔드포인트별 서버/프론트 시그니처 정의 완료
- 입력 검증 스키마(JSON Schema) 및 쿼리 검증 규칙 명세 완료
- 공통 응답 계약/오류 계약 및 HTTP 매핑 표준화 완료
- 모니터링 전송 방식(Polling/SSE) 구현 옵션 정의 완료
- 프론트엔드 통합 플로우(초기화/저장/모니터링/리포트) 정의 완료
- 정확 요청 예시 5종(설정 저장, 모드 전환, 투자 시작, 모니터 상태, 리포트 조회) 포함 완료
- 한국어 문서화 완료

## 2) 핵심 설계 결정

### 결정 1: Envelope 기반 공통 응답 계약 강제
- 방식: 성공/실패 모두 `requestId`와 `meta.timestamp` 포함
- 근거: LLD-UAG 2.2, 2.3
- 영향: UI 에러 처리 단순화, 로그 추적성 향상

### 결정 2: Polling 중심 + SSE 보조 모델 권장
- 방식: snapshot 2초 주기 + SSE 이벤트 수신 시 즉시 재조회
- 근거: LLD-UAG 4.4, 4.5
- 영향: 실시간성 유지와 데이터 일관성/복원력 균형 확보

### 결정 3: 상태 변경 API에 세션+CSRF 동시 강제
- 방식: `uag.sid` + `X-CSRF-Token` 검증 실패 시 401/403 분리
- 근거: LLD-UAG 3장
- 영향: 로컬 운영 가정에서 오조작/교차요청 리스크 감소

## 3) 체크리스트

- [x] ILD 문서 신규 생성
- [x] API 시그니처 구체화
- [x] 검증 스키마 정의
- [x] 응답 계약 정의
- [x] SSE/Polling 옵션 명세
- [x] 프론트 연동 흐름 정리
- [x] 요청 예시 5종 포함
- [x] 한국어 작성

## 4) 리스크 및 후속 권고

- 리스크: 장시간 세션에서 SSE 재연결 누적 시 이벤트 유실 체감 가능
- 권고: `Last-Event-ID` 기반 재개 + 주기적 snapshot 재동기화를 기본 정책으로 고정
- 권고: 브라우저 탭 비활성 상태에서 polling 주기 완화(백그라운드 절전)

## 5) 결론

TICKET-027 요구사항(LLD-UAG 기반 ILD-UAG 신규 작성, 구체 API 시그니처/검증 스키마/응답 계약/SSE·Polling 옵션/프론트 연동 흐름/정확 요청 예시 포함)을 충족하여 완료 처리한다.
